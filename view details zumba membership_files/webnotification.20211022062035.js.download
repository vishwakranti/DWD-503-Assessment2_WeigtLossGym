var applicationServerPublicKey="BMyGpddmOMP0_SaiE-yirgNDCNKv4Q_pAsuZWer2kRi2TIAPCXZ0hn88bXTDzEQZZo3gT5VqP3zVz6nXdvo052A";function initialiseUI(){swRegistration.pushManager.getSubscription().then(function(i){isSubscribed=null!==i,isSubscribed?window.notification_subscription=i:subscribeUser(),updateBtn()})}function updateBtn(){isSubscribed}function Base64EncodeUrl(i){return i.replace(/\+/g,"-").replace(/\//g,"_").replace(/\=+$/,"")}function urlB64ToUint8Array(i){for(var e=(i+"=".repeat((4-i.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=window.atob(e),r=new Uint8Array(n.length),t=0;t<n.length;++t)r[t]=n.charCodeAt(t);return r}function subscribeUser(){var i=urlB64ToUint8Array(applicationServerPublicKey);swRegistration.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i}).then(function(i){updateSubscriptionOnServer(i),isSubscribed=!0,updateBtn()}).catch(function(i){})}"serviceWorker"in navigator&&"PushManager"in window&&navigator.serviceWorker.register("/fsw.js").then(function(i){swRegistration=i,initialiseUI(),i.update()}).catch(function(i){});var updateSubscriptionOnServer=function(i){var e=baseurl+"/customer/add/webnotification",n=detectBrowser(),r={subscription:JSON.stringify(i)};r.customer_id=void 0!==window.user&&null!==window.user?window.user._id:"",r.device="web",r.browser=n,window.notification_subscription=i;try{var t=void 0!==fitternity.fitCookie.getCookie("currentcity")?fitternity.fitCookie.getCookie("currentcity").substring(4):"%7B%22name%22%3A%22Mumbai%22%2C%22id%22%3A1%2C%22slug%22%3A%22mumbai%22%7D",o=JSON.parse(decodeURIComponent(t));r.city_id=o.id}catch(i){}var c={type:"POST",url:e,data:JSON.stringify(r)};$.ajax(c).done(function(i){}).error(function(i){})};$("#allow").click(function(){$.magnificPopup.close(),subscribeUser()}),$("#not-now").click(function(){window.setCookie("not_now",!0,"15"),$.magnificPopup.close()});