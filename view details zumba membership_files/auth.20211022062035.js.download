var Msgs=function(e,i,o){Messenger().post({message:i,type:e,showCloseButton:o,hideAfter:3,hideOnNavigate:!0})},flexpassflag=flexpassflag,User={},config={},tok=localStorage.getItem("fitaccesstoken");void 0!==tok&&null!==tok?(config.logged_in_status=!0,config.auth_token=tok):(config.logged_in_status=!1,config.auth_token=tok),User.details=function(e){var i=e.logged_in_status,o="",n=e.auth_token;return{setUserLoginStatus:function(e,o){i=!!e,o()},checkUserLoginStatus:function(){return i},setState:function(e){o=e},getState:function(){return o},setAuthToken:function(e){n=e,i=!0},getAuthToken:function(){return n},writeReview:function(){$.magnificPopup.open({items:{src:"#report-review"},type:"inline"})}}};var from_success_page,new_user=new User.details(config);function fillInputFields(){if(void 0!==window.user&&null!==window.user){$("#myprofile input#fullname").val(window.user.name),$("#confirmation-modal input#fullname").val(window.user.name),$("#myprofile input#email").val(window.user.email),$("#confirmation-modal input#email").val(window.user.email),$("#myprofile input#mobile").val(window.user.contact_no),$("#confirmation-modal input#mobile").val(window.user.contact_no),$("#myprofile input#location").val(window.user.location),$("#confirmation-modal input#location").val(window.user.location),$("#myprofile input#addline1").val(window.user.address.line1),$("#confirmation-modal input#addline1").val(window.user.address.line1),$("#myprofile input#addline2").val(window.user.address.line2),$("#confirmation-modal input#addline2").val(window.user.address.line2),$("#myprofile input#addline3").val(window.user.address.landmark),$("#confirmation-modal input#addline3").val(window.user.address.landmark),$("#myprofile input#pincode").val(window.user.address.pincode),$("#confirmation-modal input#pincode").val(window.user.address.pincode),$(".user-name").text(window.user.name),$(".user-location").text(window.user.location),$("#personal-trainer-form input.name").val(window.user.name),$("#personal-trainer-form input.email").val(window.user.email),$("#personal-trainer-form input.phone").val(window.user.contact_no);var e=$("#myprofile input#addline1").val(),i=$("#myprofile input#addline2").val(),o=$("#myprofile input#addline3").val();window.user.customeraddress=e+", "+i+", "+o,$("#personal-trainer-form input.address").val(window.user.customeraddress),$("#myprofile input#addpincode").val(window.user.address.pincode)}else $("#triglogin").click()}var emaillogin,reInitiateLogin=function(){$("#triglogin").magnificPopup({items:{src:"#login",type:"inline"},callbacks:{open:function(){$(".login-popup").removeClass("fittv-login-styles");var e=$(".grecaptcha-badge");e.length>0?"none"==e.css("display")&&e.css("display","block"):activateGoogleRecaptcha()},close:function(){changeStylesForSignup(),hideGoogleRecaptchaBadge()}}})},checktoken=function(e){var i={token:e};$.ajax({type:"POST",url:"/user/verify",data:i,dataType:"json"}).done(function(e){null===e.customer?(window.user=null,$("#triglogin").show(),$("#triglogin1").show()):(window.user=e.customer,window.location.pathname.indexOf("profile")>0&&fillInputFields(),null!==window.user&&($(".fullname").val(window.user.name),$(".email").val(window.user.email),$(".mobile").val(window.user.contact_no)),UIChangesForLogin(),window.location.href.indexOf("/buy/")>-1&&!0===window.user.corporate_login&&changeStepHeaders(),window.location.href.indexOf("/buy/")>-1&&buy_module.loggedInCustomer()),reInitiateLogin()}).fail(function(e){reInitiateLogin()})},startrun=function(){var e=localStorage.getItem("fitaccesstoken");void 0!=e?checktoken(e):($("#triglogin").show(),$("#triglogin1").show(),window.user=null),window.searchtag={vendor:"FITNESS OPTION",categorylocation:"FITNESS TYPE + LOCATION",location:"LOCATION",categorylocationoffering:"OFFERING",categorycity:"FITNESS TYPE + CITY",categoryoffering:"OFFERING"}};function onSignIn(e){var i=e.getBasicProfile(),o={id:e.getAuthResponse().id_token,email:i.getEmail(),first_name:i.getGivenName(),last_name:i.getFamilyName()};kyu1.pushevent("gplogin",{email:o.email,first_name:o.first_name,last_name:o.last_name}),gplogin(o)}function signOut(){gapi.auth2.getAuthInstance().signOut().then(function(){})}var signin=function(e,i){var o=window.location.href.indexOf("/fit-tv")>-1,n={identity:"email",email:e.toLowerCase(),password:i};o&&(n.pagesource="fittv"),$.ajax({type:"POST",url:"/user/signin",data:n,dataType:"json"}).done(function(e){401!==e.status?(localStorage.setItem("fitaccesstoken",e.token),SetcookieForLoggedinUser(),window.user=e.customer,null!==window.user&&($(".fullname").val(window.user.name),$(".email").val(window.user.email),$(".mobile").val(window.user.contact_no)),UIChangesForLogin(),kyu1.pushevent("signin",{email:window.user.email}),$(".login-form").addClass("hide"),$(".otp-form").addClass("hide"),$(".otp-form").animate({opacity:"0"},350),$(".signin-options").css("display","none"),e.body.extra.show_popup?$(".success-msg").text(e.body.extra.popup.text):$(".success-msg").text("Logged In Successfully ! "),html2='<span class="bloading fa fa-spinner fa-pulse"></span>',$(".signup-success").append(html2),$(".signup-success").css("display","block"),setTimeout(function(){$.magnificPopup.close(),flexpassflag&&"flexpass"===flexpassflag&&setTimeout(function(){reopenRazorModal()},500)},4e3),setTimeout(function(){window.location.href.indexOf("/fit-tv")>-1?subscribeToLive():window.location.href.indexOf("/challenge-article/")>-1?getArticleData():window.location.href.indexOf("/challenge-measurement/")>-1?getMeasurementData():"home"==$("#page").text()&&fitlive_get_notification(window.user)},4e3),window.location.href.indexOf("profile")>-1&&location.reload(),window.location.href.indexOf("/buy/")>-1&&(getRewardOffersAjax(),!0===window.user.corporate_login&&changeStepHeaders()),(window.location.href.indexOf("/workoutsession")>-1||window.location.href.indexOf("/booktrial")>-1)&&showAvailableFitcash()):401==e.status&&"Incorrect email or password"!=e.message?(emaillogin=!0,$("#email").attr("readonly","true"),$("#email").val(n.email),Msgs("error","Customer Doesnt Exist. Sign Up to create your account",!0),$(".goToSignUpScreen").trigger("click")):(emaillogin=!0,Msgs("error",e.message,!0))}).fail(function(e){})},fblogin=function(e){var i={identity:"facebook",id:e.id,email:e.email,first_name:e.first_name,last_name:e.last_name};$.ajax({type:"POST",url:"/user/fbsignin",data:i,dataType:"json"}).done(function(e){401!==e.status?(localStorage.setItem("fitaccesstoken",e.token),window.user=e.customer,null!==window.user&&($(".fullname").val(window.user.name),$(".email").val(window.user.email),$(".mobile").val(window.user.contact_no)),UIChangesForLogin(),kyu1.pushevent("fblogin",{email:i.email,first_name:i.first_name,last_name:i.last_name}),$.magnificPopup.close(),Msgs("success","successfully signed in",!0),(window.location.pathname.indexOf("workoutsession")>-1||window.location.pathname.indexOf("booktrial")>-1)&&showAvailableFitcash(),window.location.href.indexOf("profile")>-1&&location.reload(),window.location.href.indexOf("/buy/")>-1&&getRewardOffersAjax(),eventsAfterSignin(e,"signin")):Msgs("error",err.message,!0)}).fail(function(e){})},gplogin=function(e){var i={identity:"google",id:e.id,email:e.email,first_name:e.first_name,last_name:e.last_name};$.ajax({type:"POST",url:"/user/gpsignin",data:i,dataType:"json"}).done(function(e){401!==e.status?(window.user=e.customer,UIChangesForLogin(),$.magnificPopup.close(),kyu1.pushevent("gp+login",{email:i.email,first_name:i.first_name,last_name:i.last_name}),Msgs("success","successfully signed in",!0),eventsAfterSignin(e,"signin")):Msgs("error",err.message,!0)}).fail(function(e){})},logout=function(){var e={token:localStorage.getItem("fitaccesstoken")};$.ajax({type:"POST",url:"/user/logout",data:e,dataType:"json"}).done(function(e){localStorage.removeItem("fitaccesstoken"),localStorage.removeItem("otp_verified"),localStorage.removeItem("freshchat_restore_id"),fitternity.fitCookie.deleteCookie("fituser"),window.user&&"google"===window.user.indentity&&signOut(),window.location.href="/"})},register=function(e,i,o){var n={identity:"email",fullname:e,mobile:i,email:o.toLowerCase(),password:pass,signupIncentive:window.signupIncentive};window.location.href.indexOf("/fit-tv")>-1&&(n.pagesource="fittv"),$.ajax({type:"POST",url:"/user/register",data:JSON.parse(JSON.stringify(n)),dataType:"json"}).done(function(e){e.status<400?(localStorage.setItem("fitaccesstoken",e.token),window.user=e.customer,UIChangesForLogin(e),kyu1.pushevent("register",{email:n.email,fullname:n.fullname}),$(".signup-form").addClass("hide"),$(".otp-form").addClass("hide"),$(".otp-form").animate({opacity:"0"},250),$(".signin-options").css("display","none"),$(".signup-success").css("display","block"),$(".bloading").removeClass("hide"),setTimeout(function(){$.magnificPopup.close()},4e3),setTimeout(function(){window.location.href.indexOf("/fit-tv")>-1?subscribeToLive():window.location.href.indexOf("/challenge-article/")>-1?getArticleData():window.location.href.indexOf("/challenge-measurement/")>-1?getMeasurementData():"home"==$("#page").text()&&fitlive_get_notification(window.user)},4e3),"review_section"==new_user.getState()&&(new_user.setAuthToken(tok),setTimeout(function(){$.magnificPopup.open({items:{src:"#report-review"},type:"inline"})},3e3))):(Msgs("error",e.message,!0),$(".signup-form").removeClass("hide"),$(".signup-form").animate({opacity:"1"},250),$(".signup-btn").css("color","#fb6812"),$(".otp-form").addClass("hide"),$(".otp-form").animate({opacity:"0"},250))}).fail(function(e){$(".signup-form").removeClass("hide"),$(".signup-form").animate({opacity:"1"},250),$(".signup-btn").css("color","#fb6812"),$(".otp-form").addClass("hide"),$(".otp-form").animate({opacity:"0"},250)})};$(".skip").click(function(){$(".signup-success").css("display","block"),setTimeout(function(){window.location.href=window.location.href},3e3)});var reqcallback=function(e,i,o,n,a,t,s){$(".bloading").removeClass("hide");var l={name:e,email:i,phone:o,preferred_time:n,vendor:t,finder_id:s,city_id:a};$.ajax({type:"POST",url:baseurl+"/email/requestcallback",data:JSON.stringify(l),dataType:"json"}).done(function(e){$(".bloading").addClass("hide"),fitevent.pushevent("captures",e.capture_id),kyu1.pushevent("callback",{email:l.email,name:l.fullname,phone:l.phone,preferred_time:l.preferred_time,vendor:l.vendor,finder_id:l.finder_id,city_id:l.city_id});$("#page").text();$(".bloading").addClass("hide"),$.magnificPopup.close(),fbq("trackCustom","Request a callback"),Msgs("success","Thanks for requesting a callback. We'll get back to you soon.",!0),window.location.href="/callback-success?time="+n+"&phone="+o}).fail(function(e){$(".bloading").addClass("hide"),Msgs("error","Oops, seems like there is an error, please try again in sometime.",!0)})},reset=function(e){var i={email:e.toLowerCase()};$.ajax({type:"POST",url:"/user/reset",data:i,dataType:"json"}).done(function(e){$.magnificPopup.close(),location.reload(!0),Msgs("success","We've sent a reset email to your email account.",!0)}).fail(function(e){})},updatepass=function(){var e={password:pass,token:token};$.ajax({type:"POST",url:"/user/resetpass",data:e,dataType:"json"}).done(function(e){localStorage.setItem("fitaccesstoken",e.token),window.location.href="/"}).fail(function(e){})},signinWithRHC=function(e){var i={};try{i.name=e.Name,i.email=e.Email,i.phone=e.Mobile,i.rx_user=!0,ajaxCall("POST",baseurl+"/reliancecustomer",i,!1).success(function(e){localStorage.setItem("fitaccesstoken",e.token),SetcookieForLoggedinUser(),window.user=e.customer,sessionStorage.setItem("rhc_customer",!0),UIChangesForLogin()})}catch(e){}};startrun(),$(".goToLoginScreen").click(function(){var e;$(".signin-options").hasClass("hide")?$(".signup-form").hasClass("hide")?$(".forgot-password").hasClass("hide")||(e=$(".forgot-password")):e=$(".signup-form"):(e=$(".signup-form"),$(".otp-form").addClass("hide"),$(".otp-form").animate({opacity:"0"},250),$(".otp-section").hide(),$(".otp-section").css({opacity:0})),e.animate({opacity:"0"},250,function(){$(".forgot-password").addClass("hide"),e.addClass("hide"),$(".signin-options").css("visibility","visible"),$(".login-form").removeClass("hide"),$(".login-form").animate({opacity:"1"},250),$("#phone").focus(),$(".loginpass").css("display","block"),$(".newtofitternity").css("display","block"),$("#dologin").removeClass("hide"),$(".atBottom").removeClass("hide"),$(".login-btn").addClass("active-screen"),$(".signup-btn").removeClass("active-screen")})}),$(".goToSignUpScreen").click(function(){var e;$(".login-form").hasClass("hide")?$(".emailoptions").hasClass("hide")||(e=$(".emailoptions")):e=$(".login-form"),void 0!==e&&e.animate({opacity:"0"},250,function(){e.addClass("hide"),$(".resend-otp-counter").removeClass("hide"),$(".signup-form").removeClass("hide"),$(".signup-form").animate({opacity:"1"},250),$("#fullname").focus(),$(".login-btn").removeClass("active-screen"),$(".signup-btn").addClass("active-screen"),$(".atBottom").removeClass("hide")})}),$(".goToAllLogin").click(function(){var e;$(".signup-form").hasClass("hide")?$(".login-form").hasClass("hide")||(e=$(".login-form")):e=$(".signup-form"),e.animate({opacity:"0"},250,function(){e.addClass("hide"),$(".signin-options").removeClass("hide"),$(".signin-options").animate({opacity:"1"},250)})}),$(".goToForgotPassScreen").click(function(){var e=$(".login-form");e.animate({opacity:"0"},250,function(){e.addClass("hide"),$(".signin-options").css("visibility","hidden"),$(".forgot-password").removeClass("hide"),$(".forgot-password").animate("transition","all 0.25s ease-out"),$("#resetEmail").focus()})}),$(function(){$("#phone").data("Mobile Number",$("#phone").attr("placeholder")),$("#phone").focusin(function(){$(".mobile2").css("transition","all 0.2s linear").css("color","#f7a81e").css("visibility","visible"),$(this).attr("placeholder","")}),$("#phone").focusout(function(){$(".mobile2").css("transition","all 0.2s linear").css("visibility","hidden").css("color","transparent"),$(this).attr("placeholder",$(this).data("Mobile Number"))})}),$(function(){$("#phonenumber").data("Mobile Number",$("#phonenumber").attr("placeholder")),$("#phonenumber").focusin(function(){$(".mobile").css("transition","all 0.2s linear").css("color","#f7a81e").css("visibility","visible"),$(this).attr("placeholder","")}),$("#phonenumber").focusout(function(){$(".mobile").css("transition","all 0.2s linear").css("visibility","hidden").css("color","transparent"),$(this).attr("placeholder",$(this).data("Mobile Number"))})}),$(function(){$("#pass").data("Password",$("#pass").attr("placeholder")),$("#pass").focusin(function(){$(".pass").css("transition","all 0.2s linear").css("color","#f7a81e").css("visibility","visible"),$(this).attr("placeholder","")}),$("#pass").focusout(function(){$(".pass").css("transition","all 0.2s linear").css("visibility","hidden").css("color","transparent"),$(this).attr("placeholder",$(this).data("Password"))})}),$(function(){$("#password").data("Password",$("#password").attr("placeholder")),$("#password").focusin(function(){$(".password").css("transition","all 0.2s linear").css("color","#f7a81e").css("visibility","visible"),$(this).attr("placeholder","")}),$("#password").focusout(function(){$(".password").css("transition","all 0.2s linear").css("visibility","hidden").css("color","transparent"),$(this).attr("placeholder",$(this).data("Password"))})}),$(function(){$("#fullname").data("First Name",$("#fullname").attr("placeholder")),$("#fullname").focusin(function(){$(".name").css("transition","all 0.2s linear").css("color","#f7a81e").css("visibility","visible"),$(this).attr("placeholder","")}),$("#fullname").focusout(function(){$(".name").css("transition","all 0.2s linear").css("visibility","hidden").css("color","transparent"),$(this).attr("placeholder",$(this).data("First Name"))})}),$(function(){$("#email").data("Email",$("#email").attr("placeholder")),$("#email").focusin(function(){$(".email2").css("transition","all 0.2s linear").css("color","#f7a81e").css("visibility","visible"),$(this).attr("placeholder","")}),$("#email").focusout(function(){$(".email2").css("transition","all 0.2s linear").css("visibility","hidden").css("color","transparent"),$(this).attr("placeholder",$(this).data("Email"))})}),$(function(){$("#resetEmail").data("Email",$("#resetEmail").attr("placeholder")),$("#resetEmail").focusin(function(){$(".email").css("transition","all 0.2s linear").css("color","#f7a81e").css("visibility","visible"),$(this).attr("placeholder","")}),$("#resetEmail").focusout(function(){$(".email").css("transition","all 0.2s linear").css("visibility","hidden").css("color","transparent"),$(this).attr("placeholder",$(this).data("Email"))})});var logininfo,loggingIn=!1;$("#phone").on("input",function(){this.value.length>=10&&(isNaN(this.value)?($(".loginpass").css("display","block"),$("#dologin").removeClass("hide"),$(".atBottom").removeClass("hide"),$(".resendOTP").addClass("hide"),$("#login-otp").addClass("hide"),$("#login-otp").animate({opacity:"0"},1e3),$(".otp-section").hide(),$(".otp-section").css({opacity:0})):10===this.value.length&&($(".number1").focus(),mobile=$(".signin input#phone").val(),logininfo={customer_phone:mobile},validateForPhone(mobile)?grecaptcha.ready(function(){grecaptcha.execute(GOOGLE_SITE_KEY,{action:"login_website"}).then(function(e){e&&(logininfo.google_captcha=e),generateOTPbeforeTransaction(logininfo,"login").then(function(e){e.status&&200==e.status?($(".login-btn").css("color","#fb6812"),$(".loginpass").css("display","none"),$(".newtofitternity").css("display","none"),$("#dologin").addClass("hide"),loggingIn=!0,$(".atBottom").addClass("hide"),$(".resendOTP").removeClass("hide"),$("#login-otp").removeClass("hide"),$("#login-otp").animate({opacity:"1"},1e3),$(".otp-section").show(),$(".otp-section").css({opacity:1}),tempOTPId=e.temp_id):e.message?successOrFail("fail",e.message):successOrFail("fail","Something Went Wrong. Please try again")})}).catch(function(e){successOrFail("fail","Oops! Something Went Wrong")})}):Msgs("error","Please Enter Valid Mobile Number"))),0===this.value.length&&($(".login-btn").css("color","#fb6812"),$(".loginpass").css("display","block"),$(".newtofitternity").css("display","block"),$("#dologin").removeClass("hide"),loggingIn=!0,$(".atBottom").removeClass("hide"),$(".resendOTP").addClass("hide"),$("#login-otp").addClass("hide"),$("#login-otp").animate({opacity:"0"},1e3),$(".otp-section").hide(),$(".otp-section").css({opacity:0}))}),$("#formsignin").validetta({showErrorMessages:!0,display:"inline",realTime:!0,errorTemplateClass:"error-inline",errorClass:"invalid-data",validClass:"valid-data",onValid:function(e){e.preventDefault();var i=$(".signin input#phone").val(),o=$(".signin input#pass").val();validateForEmail(i)?from_success_page?signinOnSuccess(i,o):signin(i,o):Msgs("error","Please Enter Valid Email ID"),loggingIn=!0},onError:function(){}});var fullname,mobile,email,pass,validateForEmail=function(e){return/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i.test(e)},validateForPhone=function(e){return/^[789]\d{9}$/.test(e)};function reopenRazorModal(){$("#buy-pass").trigger("click")}$("#formsignup").validetta({showErrorMessages:!0,display:"inline",realTime:!0,errorTemplateClass:"error-inline",errorClass:"invalid-data",validClass:"valid-data",onValid:function(e){e.preventDefault(),fullname=$(".signup input#fullname").val(),mobile=$(".signup input#phonenumber").val(),email=$(".signup input#email").val(),pass=$(".signup input#password").val();var i={customer_phone:mobile};if(validateForPhone(mobile))if(validateForEmail(email)){phonelogin?register(fullname,mobile,email):grecaptcha.ready(function(){grecaptcha.execute(GOOGLE_SITE_KEY,{action:"login_website"}).then(function(e){var o;e&&(i.google_captcha=e),generateOTPbeforeTransaction(i,"login").then(function(e){tempOTPId=e.temp_id}),$(".signup-form").hasClass("hide")||(o=$(".signup-form")),o.animate({opacity:"0"},250,function(){o.addClass("hide"),$(".signup-btn").css("color","#fb6812"),$(".otp-form").removeClass("hide"),$(".otp-form").animate({opacity:"1"},250),$(".otp-section").show(),$(".otp-section").css({opacity:1}),$(".number1").focus()})}).catch(function(e){successOrFail("fail","Oops! Something Went Wrong")})})}else Msgs("error","Please Enter Valid Email ID");else Msgs("error","Please Enter Valid Mobile Number")},onError:function(){}}),$(".number1, .number2, .number3, .number4").bind("keypress",function(e){$(".number1").focus();var i=$(this).attr("data-number-val");otpinput(e,parseInt(i))}),$(".number1, .number2, .number3, .number4").on("focus",function(e){window.outerWidth<420&&$(".proceedwithOTP").removeAttr("disabled")}),$(".proceedwithOTP").click(function(e){checkOTP()}),$(".number4").keydown(function(e){13==e.keyCode&&checkOTP()}),$(".number1, .number2, .number3, .number4").keydown(function(e){if(8==e.keyCode||229==e.keyCode){e.preventDefault();var i=$(this).attr("data-number-val")-1;$(this).val(""),setTimeout(function(){$(".number"+i).focus()},0)}});var phonelogin,stringToBePassed,token,html2,otpinput=function(e,i){var o=String.fromCharCode(e.which);if(e.preventDefault(),1==o.length&&-1==[8,37,39,48,49,50,51,52,53,54,55,56,57,229].indexOf(e.keyCode)&&(e.preventDefault(),e.stopPropagation()),!isNaN(o))if(4!==i){var n=i+1;$(".number"+i).val(o),$(".number"+n).focus()}else{$(".number4").focus(),$(".number"+i).val(o);var a=$(".number1").val(),t=$(".number2").val(),s=$(".number3").val();$(".number4").val();""!==a&&""!==t&&""!==s&&$(".proceedwithOTP").removeAttr("disabled")}},checkOTP=function(){var e=$(".number1").val(),i=$(".number2").val(),o=$(".number3").val(),n=$(".number4").val();if($(window).width()<767&&($(".number1").each(function(){!e&&$(this).val()&&(e=$(this).val())}),$(".number2").each(function(){!i&&$(this).val()&&(i=$(this).val())}),$(".number3").each(function(){!o&&$(this).val()&&(o=$(this).val())}),$(".number4").each(function(){!n&&$(this).val()&&(n=$(this).val())})),""!==e&&""!==i&&""!==o&&""!==n){var a={temp_id:tempOTPId,otp:e+i+o+n};grecaptcha.ready(function(){grecaptcha.execute(GOOGLE_SITE_KEY,{action:"login_website"}).then(function(e){e&&(a.google_captcha=e),a=attachUTMDetails(a),window.location.href.indexOf("/fit-tv")>-1&&(a.pagesource="fittv"),verifyOTPbeforeTransaction(a,!0).success(function(e){if(e.status)if(200==e.status)if(e.verified)if(localStorage.setItem("otp_verified","1"),null===e.token||""===e.token)loggingIn&&!0!==emaillogin?(phonelogin=!0,$("#phonenumber").attr("readonly","true"),$("#phonenumber").val(logininfo.customer_phone),Msgs("error","Customer Doesnt Exist. Sign Up to create your account",!0),$(".goToSignUpScreen").trigger("click")):register(fullname,mobile,email);else if(loggingIn)if(localStorage.setItem("fitaccesstoken",e.customer_data.all_accounts[0].customerToken),SetcookieForLoggedinUser(),"home"==$("#page").text()&&trackData({eventCategory:"User Login",eventLabel:"HomepageUserLogin",title:"HomepageUserLogin",what:"click"}),$(".login-form").addClass("hide"),$(".otp-form").addClass("hide"),$(".otp-form").animate({opacity:"0"},350),window.user=e.customer_data,e.customer_data.all_accounts.length>1){$(".emailoptions").removeClass("hide");for(var i='<p>We have found multiple email IDs linked to this number. Please select one as your primary email ID from the options below</p><div class="mui-select mui-col-xs-8"><select name="mySelectName" id="useremails"><option value="Select Email ID" selected>Select Email ID</option>',o=0;o<e.customer_data.all_accounts.length;o++)i+="<option>"+e.customer_data.all_accounts[o].email+"</option>";stringToBePassed=e,i+='</select></div><div class="mui-col-xs-12"><button onclick="doneSelected()">Done</button></div>',$(".emailoptions").append(i)}else $("#triglogin").hide(),$("#triglogin1").hide(),$("#profilelink").css("display","inline-block"),$("#profilelink1").css("display","block"),$("#profilelink a").text(e.customer_data.all_accounts[0].name),$("#profilelink img").attr("src",e.customer_data.all_accounts[0].picture),$(".userName").text("Hi, "+e.customer_data.all_accounts[0].name),$("#profilelink a").attr("href","/profile/"+e.customer_data.all_accounts[0].email),$("#profilelink1 a").attr("href","/profile/"+e.customer_data.all_accounts[0].email),$(".signin-options").css("display","none"),$(".emailoptions").addClass("hide"),e.popup.show_popup?$(".success-msg").text(e.popup.popup.text):$(".success-msg").text("Logged In Successfully ! "),html2='<span class="bloading fa fa-spinner fa-pulse"></span>',$(".signup-success").append(html2),$(".signup-success").css("display","block"),setTimeout(function(){$.magnificPopup.close(),flexpassflag&&"flexpass"===flexpassflag&&setTimeout(function(){reopenRazorModal()},500)},4e3),setTimeout(function(){window.location.href.indexOf("/fit-tv")>-1?subscribeToLive():window.location.href.indexOf("/challenge-article/")>-1?getArticleData():window.location.href.indexOf("/challenge-measurement/")>-1?getMeasurementData():"home"==$("#page").text()&&fitlive_get_notification(e.customer_data)},4e3);else register(fullname,mobile,email);else e.message?successOrFail("fail",e.message):successOrFail("fail","Something Went Wrong. Please try again");else e.message?successOrFail("fail",e.message):successOrFail("fail","Something Went Wrong. Please try again");else e.message?successOrFail("fail",e.message):successOrFail("fail","Something Went Wrong. Please try again")}).error(function(e){})}).catch(function(e){successOrFail("fail","Oops! Something Went Wrong")})})}else successOrFail("fail","Please enter the OTP sent to your mobile number")},doneSelected=function(){$(".signin-options").css("display","none"),$(".emailoptions").addClass("hide");var e=$("#useremails").val(),i=$.map(stringToBePassed.customer_data.all_accounts,function(i,o){if(e==i.email)return i}),o={token:i[0].customerToken};$.ajax({type:"POST",url:baseurl+"/setdefaultaccount",data:JSON.stringify(o),dataType:"json"}).done(function(e){localStorage.setItem("fitaccesstoken",i[0].customerToken),$("#triglogin").hide(),$("#triglogin1").hide(),$(".topbar #profilelink").css("display","inline-block"),$("#sidebar #profilelink1").css("display","block"),$(".topbar #profilelink a").text(i[0].name),$(".topbar #profilelink img").attr("src",i[0].picture),$(".userName").text("Hi, "+i[0].name),$(".topbar #profilelink a").attr("href","/profile/"+i[0].email),$("#sidebar #profilelink1 a").attr("href","/profile/"+i[0].email),$(".signin-options").css("display","none"),$(".emailoptions").addClass("hide"),stringToBePassed.popup.show_popup?$(".success-msg").text(stringToBePassed.popup.popup.text):$(".success-msg").text("Logged In Successfully ! "),html2='<span class="bloading fa fa-spinner fa-pulse"></span>',$(".signup-success").append(html2),$(".signup-success").css("display","block"),setTimeout(function(){$.magnificPopup.close()},4e3),setTimeout(function(){window.location.href.indexOf("/fit-tv")>-1?subscribeToLive():window.location.href.indexOf("/challenge-article/")>-1?getArticleData():window.location.href.indexOf("/challenge-measurement/")>-1?getMeasurementData():"home"==$("#page").text()&&fitlive_get_notification(window.user)},4e3)}).fail(function(e){})};function resetpassword(e){$.ajax({type:"POST",url:baseurl+"/customerforgotpassword",data:JSON.stringify(e),dataType:"json"}).done(function(e){localStorage.setItem("fitaccesstoken",e.token),checktoken(e.token),Msgs("success","Password successfully reset",!0),window.location.href="/"}).fail(function(e){})}$(".doFblogin").on("click",function(e){e.preventDefault(),FB.login(function(e){FB.api("/me",function(e){fblogin(e)})},{scope:"public_profile,email"})}),$("#forgot").validetta({showErrorMessages:!0,display:"inline",realTime:!0,errorTemplateClass:"error-inline",errorClass:"invalid-data",validClass:"valid-data",onValid:function(e){e.preventDefault();var i=$(".forgot input#resetEmail").val();reset(i)},onError:function(){}}),reInitiateLogin(),$("#termsandcond").magnificPopup({items:{src:"#tnc",type:"inline"}}),$(".healthytermsandcond").magnificPopup({items:{src:"#tnc-healthy",type:"inline"}}),$("#triglogin1").click(function(){$.magnificPopup.open({items:{src:"#login",type:"inline"},closeOnBgClick:!0,closeBtnInside:!0,enableEscapeKey:!0,showCloseBtn:!0}),$(".signup-form").addClass("hide"),$(".forgot-password").addClass("hide"),$(".signin-options").removeClass("hide"),$(".signin-options").animate({opacity:"1"},250)}),$("#doEmailSignup").magnificPopup({items:{src:"#signup",type:"inline"}}),$("#iforgot").magnificPopup({items:{src:"#forgot",type:"inline"}}),$("#trigcallback").hover(function(){$(this).removeClass("mui-btn--flat"),$(this).addClass("mui-btn--danger")},function(){$(this).removeClass("mui-btn--danger"),$(this).addClass("mui-btn--flat")}),$("#trigcallback").magnificPopup({items:{src:"#callback",type:"inline"}}),$("#trigcallback1").on("click",function(e){$("#sidebar").slideReveal("hide")}),$("#triglogin1").on("click",function(e){activateGoogleRecaptcha(),$("#sidebar").slideReveal("hide")}),$("#trigcallback1").magnificPopup({items:{src:"#callback",type:"inline"}}),$("#dologout").on("click",function(e){localStorage.setItem("workout_session",""),logout()}),$("#updatepass").on("click",function(e){e.preventDefault();var i=$(".reset input#password").val(),o=$(this).attr("data-key");updatepass(i,o)}),$("#callbackform").validetta({showErrorMessages:!0,display:"inline",realTime:!0,errorTemplateClass:"error-inline",errorClass:"invalid-data",validClass:"valid-data",onValid:function(e){e.preventDefault();var i=$("#callback input#fullname").val(),o=$("#callback input#email").val(),n=$("#callback input#mobile").val(),a=$("#callback select").val(),t=(fitternity.fitCookie.getCookie("currentcity"),void 0!==fitternity.fitCookie.getCookie("currentcity")?fitternity.fitCookie.getCookie("currentcity").substring(4):"%7B%22name%22%3A%22Mumbai%22%2C%22id%22%3A1%2C%22slug%22%3A%22mumbai%22%7D"),s=JSON.parse(decodeURIComponent(t));$(".bloading").removeClass("hide"),reqcallback(i,o,n,a,s.id)},onError:function(){}}),$("#doGplogin").on("click",function(){onSignIn()}),$("#reset").validetta({showErrorMessages:!0,display:"inline",realTime:!0,errorTemplateClass:"error-inline",errorClass:"invalid-data",validClass:"valid-data",onValid:function(e){e.preventDefault(),resetpassword({password:$("#reset input#password1").val(),password_confirmation:$("#reset input#password2").val(),password_token:$("#token").attr("data-key")})},onError:function(){}});var eventsAfterSignin=function(e,i){void 0!==window.notification_subscription&&updateWebNotificationId(e),void 0!==e.body.extra&&void 0!==e.body.extra.popup&&showPromotionalLoginPopUp(e.body.extra.popup);var o=$("#page").text();(window.location.href.indexOf("/profile")>-1||"home"==o)&&location.reload(),from_success_page&&successStuff()},updateWebNotificationId=function(e){if(void 0!==e.customer&&void 0!==e.customer._id){var i=baseurl+"/customer/update/webnotification",o={customer_id:e.customer._id,endpoint:window.notification_subscription.endpoint};try{var n=void 0!==fitternity.fitCookie.getCookie("currentcity")?fitternity.fitCookie.getCookie("currentcity").substring(4):"%7B%22name%22%3A%22Mumbai%22%2C%22id%22%3A1%2C%22slug%22%3A%22mumbai%22%7D",a=JSON.parse(decodeURIComponent(n));o.city_id=a.id}catch(e){}var t={type:"POST",url:i,data:JSON.stringify(o)};$.ajax(t).done(function(e){}).error(function(e){})}},showPromotionalLoginPopUp=function(e){$(".profilepromotion .first-section").css({"background-image":"url('"+e.header_image+"')","min-height":"190px","background-repeat":"no-repeat","background-size":"contain"}),$(".profilepromotion .headerimage").attr("src",e.header_image),$(".profilepromotion .heading h3").text(e.header_text),$(".profilepromotion .byline").text(e.text),$(".profilepromotion .action").text(e.button),$.magnificPopup.open({items:{src:"#profilepromotion-info",type:"inline"}}),$(".profilepromotion .action").click(function(){$.magnificPopup.close()}),!0===window.signupIncentive&&$(".promotional-card").hide(200),TriggerconversionEvent()},TriggerconversionEvent=function(){ga("send",{hitType:"event",eventCategory:"Signup Card",eventAction:"signup",eventLabel:"Sponsored card Search page"}),trackConv(946287096,"yek_CL-wmHMQ-OOcwwM"),fbq("trackCustom","Signup Card",{content_type:"signup"})};$("#timing").click(function(){"Select your preferred timings"==$("#timing").find("option:first-child").val()&&$("#timing").find("option").eq(0).remove(),"null"!=$("#timing").val()?($("#timing").css("color","#616161"),$("#timing").css("font-size","16px"),$("#timing").css("font-weight","500")):$("#timing").css("color","cccccc")});var counterclick=function(){$(".resend-otp-counter").hasClass("hide")&&($(".resend strong").css("cursor","pointer"),RegenerateOTP())};function storeVitalCustomerDetails(e){_.isUndefined(e)||_.isEmpty(e)||(e.errorMessage?alert("Key query provided in the url is invalid"):(localStorage.setItem("fitaccesstoken",e.token),localStorage.setItem("otp_verified","1"),window.user=e.customer_data,window.location.pathname.indexOf("profile")>-1?window.location="/profile/"+e.customer_data.email:UIChangesForLogin(e)))}